<div *ngIf="ride(); else loading" class="ride-details">

<h1>Ride Details</h1>

  <p><b>Start location:</b> {{ ride()!.startPoint }}</p>
  <p><b>End location:</b> {{ ride()!.endPoint }}</p>

  <p><b>Date:</b> {{ ride()!.startingTime | date:'dd.MM.yyyy' }}</p>
  <p><b>Start time:</b> {{ ride()!.startingTime | date:'HH:mm' }}</p>
  <p><b>End time:</b> {{ ride()!.finishedTime | date:'HH:mm' }}</p>

  <p><b>Panic activated:</b> {{ ride()!.panicActivated ? 'Yes' : 'No' }}</p>

  <h2>Price: ${{ ride()!.price }}</h2>

  <h2>Reported inconsistencies</h2>

  <div *ngIf="loadingReports()">Loading reports...</div>

  <div *ngIf="!loadingReports() && reports().length === 0">
    No reports for this ride
  </div>

  <div *ngIf="reports().length > 0" class="report-list">
    <div class="report-card" *ngFor="let report of reports()">
      <p class="report-text">“{{ report.text }}”</p>
      <p class="report-meta">
        Reported by <b>{{ report.passengerEmail }}</b>
        - {{ report.createdAt | date:'dd.MM.yyyy HH:mm' }}
      </p>
    </div>
  </div>

  <button
    class="favorite-button"
    (click)="onFavoriteRide()"
    [disabled]="isFavoriting()">
    {{ isFavoriting() ? 'Saving...' : 'Favorite This Ride' }}
  </button>

  <p *ngIf="favoriteSuccess" class="success-message">Ride added to favorites!</p>
  <p *ngIf="favoriteError" class="error-message">{{ favoriteError() }}</p>

</div>

<ng-template #loading>
  <p>Loading ride details...</p>
</ng-template>
